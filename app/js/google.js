function handleClientLoad(){gapi.load("client:auth2",initClient)}function initClient(){gapi.client.init({clientId:CLIENT_ID,discoveryDocs:DISCOVERY_DOCS,scope:SCOPES}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus),updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get())})}function updateSigninStatus(e){e?$g.param.fileId?$g.bkGet():$g.bkSet():gapi.auth2.getAuthInstance().signIn()}function handleAuthClick(e){gapi.auth2.getAuthInstance().signIn()}function handleSignoutClick(e){gapi.auth2.getAuthInstance().signOut()}function appendPre(e){var t=document.getElementById("content"),i=document.createTextNode(e+"\n");t.appendChild(i)}var CLIENT_ID="498517322033-g45m16rg9m7m8lia6g0omjhqfqbtbvcv.apps.googleusercontent.com",DISCOVERY_DOCS=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],SCOPES="https://www.googleapis.com/auth/drive.file",$g={name:"Tsilio Backup",param:localStorage.getItem("googleIntegration")&&JSON.parse(localStorage.getItem("googleIntegration"))||{},initBK:function(){handleClientLoad()},bkGet:function(){var e=this;gapi.client.drive.files.get({fileId:this.param.fileId}).then(function(t){e.fileRead(t.body)})},bkSet:function(){var e=this;return gapi.client.drive.files.create({resource:{mimeType:"aplication/json",name:"Tsilio Backup"}}).then(function(t){console.log("Response",t),e.fileCreated(t.result.id)},function(e){console.error("Execute error",e)})},bkUpdate:function(){var e=this;return gapi.client.request({path:"/upload/drive/v3/files/"+e.param.fileId,method:"PATCH",params:{uploadType:"media"},body:{j:1}})},fileCreated:function(e){this.param.fileId=e,localStorage.setItem("googleIntegration",this.param),this.bkUpdate()},fileRead:function(e){console.log("File read",JSON.parse(e))}};